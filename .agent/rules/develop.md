---
description: 開発サイクルの基本ルール（ブランチ管理、コミット、検証、マージ）
trigger: always_on
---

# 開発ルール

このドキュメントは、エージェントが開発作業を行う際の基本規約を定義します。

## 1. 修正の開始
1.  **Issue発行**: 修正を開始する前に、必ずGitHubでIssueを発行すること。
2.  **概要の記載**: Issueには作業内容の要約を記載すること。
3.  **ブランチ作成**: 最新の `origin/develop` からブランチを切り出すこと。
    - ブランチ名形式: `feature/issue-[Issue番号]`

## 2. 開発とコーディング規約
1.  **コメント**: コード内のコメントは日本語で記述すること。
2.  **ログ**: 実装する際には適宜[ログ](file:///c:/Workspace/life_counter/lib/shared/utils/app_logger.dart)を埋め込むこと。
3.  **テストコードの維持**: 新しい機能を実装やリファクタリングをする際には、テストコードの作成及び既存テストコードのメンテナンスを行うこと。
4.  **フォーマット**: コミット前には必ず `dart format .` を実行し、コードを整形すること。

## 3. コミットルール
1.  **コミット単位**: 機能の追加や修正の論理的なまとまりなど、意味のある作業単位（atomic commit）名で適切にコミットを行うこと。
2.  **コミットメッセージ**: `type: #[Issue番号] 概要` の形式で記述すること。
    - 例: `feat: #111 自動テストの導入`

## 4. 品質保証 (必須)
コードを提出または編集する際は、以下のチェックを必ずローカルで実施し、パスすることを確認すること。
- `dart format .` (プロジェクト全体のフォーマット適用)
- `flutter analyze` (静的解析)
- `flutter test` (全ユニット/ウィジェットテストの実行)

## 5. 合流 (developへ)
1.  **PR作成とマージ**: 作業完了後、`origin/develop` へプルリクエストを作成してマージすること。
2.  **ブランチの維持**: マージ後も元のブランチを削除しないこと（履歴保持のため）。
3.  **Issue管理**: `develop` へのマージ完了後、対応するIssueをクローズすること。

## 6. 同期
1.  マージ後は最新の `origin/develop` を `fetch` し、ローカルブランチに `pull` して最新状態を保つこと。
2.  **mainとの同期**: `main` ブランチが更新（リリース）された後は、必ず `main` を `develop` にマージして、開発ブランチを最新の状態に保つこと。

## 7. リリース
1.  `main` ブランチへのリリースを行う際は、[リリース手順](file:///c:/Workspace/life_counter/.agent/rules/release.md) に記載された手順に従うこと。
